{% extends 'base.html' %}
{% block content %}

<form method="GET">
    <label>Select Classroom:</label>
    <select name="classroom_id" onchange="this.form.submit()">
        <option value="">-- All Classrooms --</option>
        {% for c in classrooms %}
            <option value="{{ c.id }}" {% if selected_classroom_id == c.id|string %}selected{% endif %}>
                {{ c.name }}
            </option>
        {% endfor %}
    </select>
</form>

<br>

<table border="1">
    <tr><th>#</th><th>Name</th><th>Class</th><th>Actions</th></tr>
    {% for s in students %}
    <tr>
        <td>{{ loop.index }}</td>
        <td>{{ s.name }}</td>
        <td>{{ s.classroom.name }}</td>
        <td>
            <a class="act" href="{{ url_for('student_records', student_id=s.id) }}">View</a> |
            <form method="POST" action="{{ url_for('delete_student', student_id=s.id) }}" style="display:inline;" onsubmit="return confirm('Delete this student?');">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {% else %}
    <tr><td colspan="4">No students found.</td></tr>
    {% endfor %}
</table>
{% endblock %}
